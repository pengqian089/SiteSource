let dpzOption={webApiBaseAddress:document.head.querySelector("meta[name=web-api-base-address]").content,CDNBaseAddress:document.head.querySelector("meta[name=cdn-base-address]").content,isDark:!1};function leftIn(){$(".blog-mask").unbind("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend"),$(".blog-nav-left").unbind("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend"),$(".blog-mask").removeClass("maskOut"),$(".blog-mask").addClass("maskIn"),$(".blog-mask").removeClass("layui-hide"),$(".blog-mask").addClass("layui-show"),$(".blog-nav-left").removeClass("leftOut"),$(".blog-nav-left").addClass("leftIn"),$(".blog-nav-left").removeClass("layui-hide"),$(".blog-nav-left").addClass("layui-show")}function leftOut(){$(".blog-mask").on("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){$(".blog-mask").addClass("layui-hide")}),$(".blog-nav-left").on("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){$(".blog-nav-left").addClass("layui-hide")}),$(".blog-mask").removeClass("maskIn"),$(".blog-mask").addClass("maskOut"),$(".blog-mask").removeClass("layui-show"),$(".blog-nav-left").removeClass("leftIn"),$(".blog-nav-left").addClass("leftOut"),$(".blog-nav-left").removeClass("layui-show")}function categroyIn(){$(".category-toggle").addClass("layui-hide"),$(".article-category").unbind("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend"),$(".article-category").removeClass("categoryOut"),$(".article-category").addClass("categoryIn"),$(".article-category").addClass("layui-show")}function categoryOut(){$(".article-category").on("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){$(".article-category").removeClass("layui-show"),$(".category-toggle").removeClass("layui-hide")}),$(".article-category").removeClass("categoryIn"),$(".article-category").addClass("categoryOut")}function lightCode(){document.querySelectorAll("pre code").forEach(t=>{Prism.highlightElement(t)}),codeBlockTools()}function codeBlockTools(){$("pre[class*=language-]").wrap('<div class="code-area" style="position: relative"></div>');var t=$('<i class="fa fa-angle-up fa-fw code-expand" aria-hidden="true" title="折叠"></i>');$(".code-area").prepend(t),$(".code-expand").on("click",function(){$(this).parent().hasClass("code-closed")?($(this).siblings("pre").find("code").show(),$(this).siblings("pre").find(".line-highlight").show(),$(this).parent().removeClass("code-closed")):($(this).siblings("pre").find("code").hide(),$(this).siblings("pre").find(".line-highlight").hide(),$(this).parent().addClass("code-closed"))});var e=$('<i class="fa fa-copy fa-fw code_copy" title="复制代码" aria-hidden="true"></i>'),t=$('<div class="codecopy_notice"></div>');$(".code-area").prepend(e),$(".code-area").prepend(t),$(".code-area .fa-copy").on("click",function(){let t=window.getSelection(),e=document.createRange();e.selectNodeContents($(this).siblings("pre").find("code")[0]),t.removeAllRanges(),t.addRange(e);t.toString();!function(){if(document.queryCommandSupported&&document.queryCommandSupported("copy"))try{document.execCommand("copy"),layer.msg("复制成功")}catch(t){return layer.msg("复制失败")}else layer.msg("浏览器不支持")}(),t.removeAllRanges()});t=$('<div class="code_lang" title="代码语言"></div>');$("pre").before(t),$("pre").each(function(){var t;for(t of $(this).prop("class").split(/\s+/))if(t.startsWith("language")){var e=t.replace("language-","").trim();$(this).siblings(".code_lang").text(e);break}})}function generateToc(){let t=$(".js-toc");if(0!==t.length)return 0===$(".article-detail-content").find("h1,h2,h3").length?(tocbot.destroy(),$("label.toc-icon.menu").hide(),void t.hide()):void tocbot.init({tocSelector:".js-toc",contentSelector:".article-detail-content",headingSelector:"h1, h2, h3",hasInnerContainers:!0})}function pjaxCompleteInit(){lightCode(),generateToc(),$("time.timeago").relativeTime(),initVideoPlayer(),initFetchContent()}function showNotify(t){var e={title:"",content:"",image:"/images/logo.png"};return $.extend(e,t),"Notification"in window&&"granted"===Notification.permission?new Notification(e.title,{icon:e.image,body:e.content,lang:"zh-cn",tag:e.tag}):null}function loadImages(e){let o=[];for(let t=0;t<e.length;t++){let n=e[t];var a=new Promise((t,e)=>{n.complete?t(n):(n.addEventListener("load",function(){(n.complete?t:e)(n)}),n.addEventListener("error",function(){console.warn(`the image [${n.src}] loaded error.`),e(n)}))});o.push(a)}return Promise.all(o)}function topicHideMore(t){t.each(function(t){let e=this;var n=$(this).find("img");function o(){500<$(e).height()&&($(e).addClass("hide-content"),$(e).parents(".blog-module.shadow").find(".more").removeClass("hide"))}0<n.length?loadImages(n).finally(()=>o()):o()})}window.matchMedia("(prefers-color-scheme: dark)").matches&&(dpzOption.isDark=!0),layui.use(["element","layer","carousel","util","flow","form","upload"],function(){let n=layui.element,c=layui.layer,t=(layui.carousel,layui.flow),e=layui.util;e.fixbar({bar1:"&#xe64a;",css:{bottom:55},click:function(t){if("bar1"===t){let t=c.load();console.log(event),$.ajax({url:"/Home/TodayWallpaper"}).done(function(t){let e=[];for(var n of t)e.push({src:n.url.replaceAll("1920x1080","UHD"),w:1920,h:1080,title:n.copyRight});t={index:0,bgOpacity:.7,showHideOpacity:!0,history:!0,getThumbBoundsFn:function(t){let e=document.querySelectorAll(".layui-fixbar [lay-type=bar1]")[t];var n=window.pageYOffset||document.documentElement.scrollTop,t=e.getBoundingClientRect();return{x:t.left,y:t.top+n,w:t.width}}};let o=new PhotoSwipe(document.getElementById("gallery"),PhotoSwipeUI_Default,e,t);o.init()}).always(function(){c.close(t)})}}}),t.lazyimg();let o=new LazyLoad({});if(!1===layui.device().mobile)try{const v=document.querySelector("#can-back-round");var a=v.getBoundingClientRect();v.width=a.width,v.height=a.height;const k=new RaindropFX({canvas:v,background:dpzOption.isDark?dpzOption.CDNBaseAddress+"/../images/core-background2.jpeg":dpzOption.CDNBaseAddress+"/../images/background.jpg"});window.onresize=()=>{var t=v.getBoundingClientRect();k.resize(t.width,t.height)},k.start()}catch(t){console.log(t)}function i(t,e){let n=new TencentCaptcha("2084420298",function(t){console.log(t),0===t.ret&&e(t)},{bizState:t,enableDarkMode:!0,needFeedBack:!0});n.show()}$.ajax({url:"/account/GetUserInfo"}).done(function(t){t.success&&$(".blog-user").attr("href","/account").find("img").attr({src:t.data.avatar+"?width=40&height=40",title:t.data.name})}).fail(ajaxFail),$(document).delegate(".blog-navicon","click",function(){let t=new RegExp("layui-hide");(t.test($(".blog-nav-left").attr("class"))?leftIn:leftOut)()}),$(document).delegate(".blog-mask","click",function(){leftOut()}),$(document).delegate(".category-toggle","click",function(){categroyIn()}),$(document).delegate(".article-category","click",function(){categoryOut()}),$(document).delegate(".article-category > a","click",function(){$(".article-category > a").removeClass("tag-this"),$(this).addClass("tag-this")}),$(document).on("pjax:send",function(){NProgress.start()});let l;$(document).on("pjax:complete",function(t,e){l=e.getResponseHeader("title"),""===l||null===l?document.title="（；´д｀）ゞ标题不见啦 - 叫我阿胖":document.title=Base64.decode(l),n.render(),categoryOut(),leftOut(),pjaxCompleteInit(),NProgress.done()}),$(document).on("pjax:end",function(){d=$("#topic-comments"),r=d.data("topicId"),m=parseInt(d.data("commentSize")),u=parseInt(d.data("commentStartPage")),g=parseInt(d.data("totalPage")),f=d.data("commentSort"),o.update()}),$(document).delegate("[data-likeid]","click",function(){let e=$(this),t=c.load(1);$.ajax({url:"/Talk/Like",data:{id:e.data("likeid")},type:"post"}).done(function(t){t.success?e.find("[data-number]").text(t.data):c.msg(t.msg,{icon:2,anim:6})}).always(function(){c.close(t)})}),$(document).delegate("[data-comment-id]","click",function(){let o=$(this),a=o.parents("div.comment-parent").find("div.comments[data-talk-id]");if(0<a.find("form").length)a.hide(100,function(){a.html("")});else{$("div.comment-parent div.comments[data-talk-id] div.comment-container").hide(function(){$(this).html("")});let t=c.load(1);$.ajax({url:"/Comment/Mumble/"+o.data("commentId"),type:"get"}).done(function(t,e,n){o.find("[data-comment-count]").text(n.getResponseHeader("commentCount")),a.html(t),lightCode(),a.show(),o.parents(".comment-parent").find("time.timeago").relativeTime()}).always(function(){c.close(t)})}}),$(document).delegate("button[data-btn-comment]","click",function(t){let e=$(this).parents("form")[0],n=new FormData(e),a=$(this);function o(){let t=c.load(1),o=a.data("btnComment");$.ajax({processData:!1,contentType:!1,url:e.getAttribute("action"),data:n,type:e.getAttribute("method")}).done(function(t){if(t.success){let t=c.load(1);$.ajax({url:"/Talk/GetComments",data:{id:o},type:"get"}).done(function(t,e,n){$(`[data-comment-id=${o}]`).find("[data-comment-count]").text(n.getResponseHeader("itemCount")),a.parents(".comment-parent").find(".comments[data-talk-id]").html(t)}).always(function(){c.close(t)})}else c.msg(t.msg,{icon:2,anim:6})}).always(function(){c.close(t)})}"no-login"!==$("#loginStatus").val()?o():i(a.data("scene"),function(t){n.append("ticket",t.ticket),n.append("randstr",t.randstr),n.append("scene",t.bizState),o()})}),$(document).delegate("#comment-pager a[href]","click",function(t){t.preventDefault();let e=$(this);t=$(this).attr("href");let n=c.load(1);$.ajax({url:t,type:"get"}).done(function(t){e.parents(".comment-parent").find(".comments[data-talk-id]").html(t),lightCode()}).always(function(){c.close(n)})});let s=".article.shadow .article-left img,#talk-list>ul>li .content-detail .content img,.article-detail-content img,#cd-timeline .content img";$(document).delegate(s,"click",function(){let t=c.load(1),i=$(s);loadImages(i).then(e=>{let n=[];for(let t=0;t<e.length;t++){var o=e[t];n.push({src:o.src,w:o.naturalWidth,h:o.naturalHeight,title:o.alt})}var t={index:i.index(this),bgOpacity:.7,showHideOpacity:!0,history:!0,getThumbBoundsFn:function(t){let e=document.querySelectorAll(s)[t];var n=window.pageYOffset||document.documentElement.scrollTop,t=e.getBoundingClientRect();return{x:t.left,y:t.top+n,w:t.width}}};let a=new PhotoSwipe(document.getElementById("gallery"),PhotoSwipeUI_Default,n,t);a.init()}).finally(()=>c.close(t))}),$(document).delegate("form.layui-form[data-load-page]","submit",function(t){t.preventDefault();let e=new FormData(this),n=$(this).data("loadPage"),o=$(this);function a(){let t=c.load(1);$.ajax({url:"/article/comment",processData:!1,contentType:!1,data:e,type:"post"}).done(function(t){t.success?($("textarea").val(""),$.pjax({url:n,container:"#blog-comment",scrollTo:!1})):c.msg(t.msg,{icon:2,anim:6})}).always(function(){c.close(t)})}"no-login"!==$(this).data("login")?a():i(o.data("scene"),function(t){e.append("ticket",t.ticket),e.append("randstr",t.randstr),e.append("scene",t.bizState),a()})}),$(document).delegate(".content-detail .more a","click",function(){let t=$(this).parents(".more"),e=$(this).parents(".content-detail").find(".content");t.hasClass("show-more")?(t.removeClass("show-more"),e.addClass("hide-content"),$(this).html('查看更多<i class="layui-icon layui-icon-down">')):(t.addClass("show-more"),e.removeClass("hide-content"),$(this).html('收起<i class="layui-icon layui-icon-up">'))}),$(document).delegate("#i-search","submit",function(){var t=$("#i-keyword").val();let e=$(this).find("[name=q]");$(this).find("[name=q]").val(e.data("default")+" "+t)}),$(document).delegate("#i-keyword","keyup",function(t){13===t.keyCode&&$(this).parents("form").submit()}),$(document).delegate("#i-search a.search-btn","click",function(){$(this).parents("form").submit()}),$(document).delegate(".blog-module.shadow .more a","click",function(){let t=$(this).parents(".more"),e=$(this).parents(".blog-module.shadow").find(".topic");t.hasClass("show-more")?(t.removeClass("show-more"),e.addClass("hide-content"),$(this).html('查看更多<i class="layui-icon layui-icon-down">')):(t.addClass("show-more"),e.removeClass("hide-content"),$(this).html('收起<i class="layui-icon layui-icon-up">'))}),$(document).delegate("a[data-topic-delete]","click",function(){let n=$(this).data("topicDelete");c.confirm("删除后不可恢复，是否删除？",function(t){c.close(t);let e=c.load();$.ajax({url:"/topic/deleteTopic",data:{id:n},type:"post"}).done(function(t){t.success?$.pjax({url:location.pathname,container:".blog-main-left",scrollTo:!0}):c.msg(t.msg,{icon:2,anim:6})}).always(function(){c.close(e)}).fail(ajaxFail)})}),$(document).delegate("a[data-topic-comment-delete]","click",function(){let n=$(this).data("topicCommentDelete");c.confirm("删除后不可恢复，是否删除？",function(t){c.close(t);let e=c.load();$.ajax({url:"/topic/deleteComment",data:{id:n},type:"post"}).done(function(t){t.success?$.pjax({url:location.pathname,container:".blog-body",scrollTo:!0}):c.msg(t.msg,{icon:2,anim:6})}).always(function(){c.close(e)}).fail(ajaxFail)})}),0<window.scrollY&&$(".blog-nav").css({"background-color":"rgba(57,61,73,.5)","backdrop-filter":"blur(100px)"});let d=$("#topic-comments"),r=d.data("topicId"),m=parseInt(d.data("commentSize")),u=parseInt(d.data("commentStartPage")),g=parseInt(d.data("totalPage")),f=d.data("commentSort"),p=!1;let h=null,b=$(window),y=$(document);function w(t){clearTimeout(h),h=setTimeout(function(){0<window.scrollY?$(".blog-nav").css({"background-color":"rgba(57,61,73,.5)","backdrop-filter":"blur(100px)"}):0===window.scrollY&&$(".blog-nav").css({"background-color":"rgb(57,61,73)","backdrop-filter":"none"}),0===d.length||u>g||b.scrollTop()+b.height()>y.height()-120&&!0!==p&&(p=!0,$("#topic-comment-loading").show(),$.ajax({url:"/topic/commentPage",data:{id:r,pageIndex:u,pageSize:m,sort:f},type:"get"}).done(function(t){u++;let e=$(t);$("#topic-comments").append(e),e.find("time.timeago").relativeTime(),e.find("pre code").each(function(t,e){Prism.highlightElement(block)}),topicHideMore(e.find(".article-detail-content.topic")),o.update()}).always(function(){p=!1,$("#topic-comment-loading").hide()}).fail(function(t){t&&t.responseJSON&&!1===t.responseJSON.success&&c.alert(t.responseJSON.msg)}))},100)}b.off("scroll",w).on("scroll",w),$(document).delegate(".comments-area .load-more button","click",function(){let o=$(this).parents(".comments-area"),a=$(this).parent(),i=$(this).parents().find(".comment-count span");var t=$(this).parent().data("loadingIco");a.html(`<img src="${t}" class="comment-loading" alt="loading"/>`);var e=parseInt($(this).data("pageIndex")),n=parseInt($(this).data("pageSize")),t=$(this).data("pageRequest");$(this);$.ajax({url:t,type:"get",data:{pageIndex:e+1,pageSize:n}}).done(function(t,e,n){o.append(t),a.remove(),i.text(n.getResponseHeader("commentCount")),$("time.timeago").relativeTime(),lightCode()}).fail(ajaxFail)}),$(document).delegate("form.comment-form :input:not(textarea)","keydown",function(t){return"Enter"!=t.key}),$(document).delegate("form.comment-form","submit",function(){event.preventDefault();var t=new FormData(this);let i=$(this),l=$(this).parents(".comment-block").find(".comment-count span");$(this).find("button.layui-btn.layui-btn-sm").addClass("layui-btn-disabled").attr("disabled","disabled").html('<i class="layui-icon layui-icon-loading layui-anim layui-anim-rotate layui-anim-loop layui-font-12"></i> 发送'),$.ajax({url:i.attr("action"),processData:!1,contentType:!1,data:t,type:"post"}).done(function(o,t,a){if(o.hasOwnProperty("success")&&!1===o.success)c.msg(o.msg,{icon:2,anim:6});else{let t=i.clone(),e=i.parents(".comment-block"),n=e.find(".comments-area:first");e.find(".comments-area").html(o),i.remove(),t.find("textarea").val(""),t.find("button.layui-btn.layui-btn-sm").removeClass("layui-btn-disabled").removeAttr("disabled").html("发送"),t.find("input[name=replyId]").val(""),t.find(".comment-btn-close").hide(),t.find(".comment-btn-close").unbind("click"),n.before(t),l.text(a.getResponseHeader("commentCount")),$("time.timeago").relativeTime(),lightCode()}}).always(function(){i.find("button.layui-btn.layui-btn-sm").removeClass("layui-btn-disabled").removeAttr("disabled").html("发送")})}),$(document).delegate(".comment-count button.refresh","click",function(){let o=$(this).parents(".comment-block").find(".comments-area");var t=$(this).data("refresh")+"?t="+(new Date).getTime();let a=$(this).parent().find("span"),e=c.load();$.ajax({url:t,type:"get"}).done(function(t,e,n){o.html(t),a.text(n.getResponseHeader("commentCount")),$("time.timeago").relativeTime(),lightCode()}).fail(ajaxFail).always(function(){c.close(e)})}),$(document).delegate(".footer-action-item[data-image]","click",function(){let o=$(this).parents().find("textarea.comment-form-editor");c.prompt({title:"请输入网络图片地址"},function(t,e){let n;try{n=new URL(t)}catch{return void c.msg("请输入正确的地址嗷~")}"https:"===n.protocol?(t=`![](${n.toString()})`,o.val(o.val()+"\r\n"+t),c.close(e)):c.msg("使用https协议的网络图片嗷~")})}),$(document).delegate(".comments-area blockquote.comment-item button.btn-reply","click",function(){let t=$(this).parents(".comment-block").find("form.comment-form"),e=t.clone();t.remove();let n=$(this);e.find("input[name=replyId]").val($(this).data("replyId")),e.find(".comment-btn-close").show(),e.find(".comment-btn-close").bind("click",function(){e.find("input[name=replyId]").val(""),n.parents(".comments-area").before(e),$(this).hide(),$(this).unbind("click")}),$(this).parents(".comment-block blockquote.comment-item:first").find(".detail > .comment-content:first").after(e)}),$(document).delegate(".loading-summary a[data-summary]","click",function(){var t=$(this).data("summary");$(this);let e=$(this).parents(".game-achievements");$(this).parent().next().show(),$(this).parent().remove(),$.ajax({url:t,type:"get"}).done(function(t){e.html(t)})}),$(document).delegate("[data-tips]","touchend",function(){var t=$(this).data("tips");c.tips(t,this,{tips:3})}),$(document).delegate("time.timeago","touchend",function(){var t=$(this).attr("title");c.tips(t,this,{tips:3})})}),$(function(){$.fn.relativeTime=function(){this.each(function(t){var e,n;void 0===$(this).data("timeStatus")&&(n=$(this).attr("datetime"),e=$(this).text(),n=moment(n,"YYYY/MM/DD HH:mm:ss").fromNow(),$(this).text(n).attr("title",e).data("timeStatus","loaded"))})},$.pjax.defaults.timeout=2e4,$(document).pjax("nav.blog-nav ul.layui-nav>li>a,a[data-pjax]",".blog-body"),$(document).pjax("#blog-list a,.tags a",".blog-main-left"),$(document).pjax("#articl-comment a","#blog-comment",{scrollTo:!1}),$(document).pjax("#talk-pager a","#talk-list"),$(document).pjax("#topic-list a",".blog-main-left"),$(document).pjax(".code-box .box-rows .row .header a",".code-box .box-rows"),$.support.pjax&&$(".tags a").on("click",function(t){$(".tags a").removeClass("tag-this"),$(this).addClass("tag-this");$.pjax.click(t,{container:".blog-main-left"})}),pjaxCompleteInit()}),codeBlockTools(),function(){moment.locale("zh-cn");const e=new APlayer({container:document.getElementById("aplayer"),lrcType:3,fixed:!0});$.ajax("/Music/Recommend").done(function(t){e.list.add(t)}),"granted"!==Notification.permission&&Notification.requestPermission(function(t){"granted"===t&&console.info("通知已授权")});let n=0,t=(new signalR.HubConnectionBuilder).withUrl("/notification").build();t.start().then(()=>{t.invoke("Init").catch(function(t){return console.error(t.toString())})}).catch(t=>console.error(t.toString())),t.on("pushMusic",function(t){e.list.add(t),e.list.switch(e.list.audios.length-1)}),t.on("pushMessage",function(t){let e=showNotify({title:"小喇叭开始广播辣",content:t.markdown});null!==e&&(e.onclick=function(){window.open("/talk.html")}),console.info(t)}),t.on("pushLogMessage",function(t,e){0===t?(console.log(`%c LogMessage %c [${(new Date).toISOString()}]  %c `+e,"color: #bb0662; background: #030307; padding:5px 0;","color: #fadfa3; background: #393d49; padding:5px 0","font-weight:bold; color: black; background: #77f2e1; padding:5px 0;"),$.notify(moment().format("YYYY-MM-DD HH:mm:ss")+`
`+e,"success")):1===t?(console.log(`%c LogMessage %c [${(new Date).toISOString()}]  %c `+e,"color: #bb0662; background: #030307; padding:5px 0;","color: #fadfa3; background: #393d49; padding:5px 0","font-weight:bold; color: black; background: #fadfa3; padding:5px 0;"),$.notify(moment().format("YYYY-MM-DD HH:mm:ss")+`
`+e,"warn")):2===t&&(console.log(`%c LogMessage %c [${(new Date).toISOString()}]  %c `+e,"color: #bb0662; background: #030307; padding:5px 0;","color: #fadfa3; background: #393d49; padding:5px 0","font-weight:bold; color: black; background: red; padding:5px 0;"),$.notify(moment().format("YYYY-MM-DD HH:mm:ss")+`
`+e,"error"))});let a=null;t.on("cnBetaSubscribe",function(e){let n=[];if(e.hasOwnProperty("progressValues")&&Array.isArray(e.progressValues))for(let t=0;t<e.progressValues.length;t++){var o=(100*e.progressValues[t]).toFixed(2);n.push(parseFloat(o))}switch(null==a?a=notification.show({title:"CnBeta发布",content:e.message,bars:n}):(notification.setContent(a,e.message),notification.setProgress(a,n)),e.type){case 0:outPutSuccess(e.message);break;case 1:outPutInfo(e.message);break;case 2:outPutError(e.message);break;case 3:outPutSuccess(e.message),setTimeout(function(){notification.close(a),a=null},1e3)}});let i=null;function o(){t.invoke("getRunTime")}t.on("hotTopicMessage",function(e){let n=[];if(e.hasOwnProperty("progressValues")&&Array.isArray(e.progressValues))for(let t=0;t<e.progressValues.length;t++){var o=(100*e.progressValues[t]).toFixed(2);n.push(parseFloat(o))}null==i?i=notification.show({title:"今日热榜发布",content:e.message,bars:n}):(notification.setContent(i,e.message),notification.setProgress(i,n),3===e.type&&setTimeout(function(){notification.close(i),i=null},1e3)),outPutSuccess(e.message)}),t.on("ready",function(t){console.info(t)}),setTimeout(function(){o()},1e3),t.on("ReceiveRunTime",function(t){let e=$("#runTime");0<e.length&&(e.text("运行时间 "+t),setTimeout(o,1e3))}),t.onclose(async()=>{n++,await async function e(){try{await t.start(),n=0,console.log("connected")}catch(t){10<n&&(console.log("try connect 10"),console.log(t)),console.log(t),setTimeout(()=>e(),3e3)}}()})}();let notification={show:function(t){"object"!=typeof t&&(t={});let s={title:"",content:"",bars:[]};$.extend(s,t);let e=0;$(".notification-box").each(function(){e+=$(this).height()+15});let n=function(t,e){let n=$("<div>").addClass("notification-box"),o=$("<div>").addClass("title").text(t);n.append(o);let a=$("<div>").addClass("content-container"),i=$("<span>").addClass("content").text(e);a.append(i);var l=function(e){let n=[];if(!Array.isArray(e))return n;for(let t=0;t<e.length;t++)"number"==typeof e[t]&&n.push(e[t]);return n}(s.bars);for(let e=0;e<l.length;e++){let t=$("<div>").addClass("progress");var c=l[e]+"%",c=$("<div>").addClass("bar").css("width",c).text(c);t.append(c),a.append(t)}return n.append(a),n}(s.title,s.content);return n.css("top",e+15+"px"),$("body").append(n),n},setContent:function(t,e){0!==t.length&&t.find(".content").text(e)},setTitle:function(t,e){0!==t.length&&t.find(".title").text(e)},setProgress:function(n,o){if(0!==n.length&&Array.isArray(o)){let e=0;for(let t=0;t<o.length;t++)"number"==typeof o[t]&&(n.find(`.content-container .progress:eq(${e}) .bar`).css("width",o[t]+"%").text(o[t]+"%"),e++)}},close:function(t){0!==t.length&&t.fadeOut("fast",function(){t.remove()})},closeAll:function(){$(".notification-box").fadeOut("fast",function(){$(".notification-box").remove()})},test:function(){let e=notification.show({title:"这是标题呀",content:"内容",bars:[0]});setTimeout(function t(){if(100<=n)return notification.setContent(e,"加载完毕，即将关闭！"),void notification.close(e);n++;notification.setContent(e,"新内容呀\n"+n);notification.setProgress(e,[n]);setTimeout(t,100)},100);let n=0}};function outPutSuccess(t){console.log(`%c Success %c [${moment().format("YYYY-MM-DD HH:mm:ss")}]  %c `+t,"color: #bb0662; background: #030307; padding:5px 0;","color: #fadfa3; background: #393d49; padding:5px 0","font-weight:bold; color: black; background: #77f2e1; padding:5px 0;")}function outPutInfo(t){console.log(`%c Info %c [${moment().format("YYYY-MM-DD HH:mm:ss")}]  %c `+t,"color: #bb0662; background: #030307; padding:5px 0;","color: #fadfa3; background: #393d49; padding:5px 0","font-weight:bold; color: black; background: #fadfa3; padding:5px 0;")}function outPutError(t){console.log(`%c Error %c [${moment().format("YYYY-MM-DD HH:mm:ss")}]  %c `+t,"color: #bb0662; background: #030307; padding:5px 0;","color: #fadfa3; background: #393d49; padding:5px 0","font-weight:bold; color: black; background: red; padding:5px 0;")}function ajaxFail(t,e,n){console.log(t),console.log(e),console.log(n),t.hasOwnProperty("responseJSON")&&t.responseJSON.hasOwnProperty("success")&&t.responseJSON.hasOwnProperty("msg")&&!1===t.responseJSON.success?layer.alert(t.responseJSON.msg):layer.msg("error:"+t.status)}async function initVideoPlayer(){const e=document.getElementById("video-player")||document.getElementById("m-video-player");if(null!=e){e.style.marginBottom="15px";let t=await fetch(dpzOption.webApiBaseAddress+"/api/Video",{method:"GET",headers:{"Content-Type":"application/json"},mode:"cors"});var n=await t.json(),o=Math.floor(Math.random()*n.length);new DPlayer({container:document.getElementById(e.id),danmaku:{api:"/history/chat/",id:n[o].id,maximum:2e3,token:"tokendemo",user:"阿胖",bottom:"15%"},video:{url:n[o].m3u8,type:"hls"}})}}async function initFetchContent(){for(let e of document.querySelectorAll("[data-request]")){let t=await fetch(e.dataset.request,{method:"GET"});t.text().then(t=>{e.innerHTML=t,$("time.timeago").relativeTime(),lightCode()})}}
//# sourceMappingURL=site.min.js.map